TCP와 UDP는 OSI 7 계층중 TCP/IP의 전송 계층에서 사용되는 프로토콜이다 

전송계층은 데이터의 전달을 담당하며

전달되는 패킷의 오류를 검사하고 재전송 요구 등의 제어를 담당한다 

### 대표적인 차이점
TCP
: 신뢰성이 높다, 속도가 느리다, 연결형 서비스, 수신여부 확인

UDP 
: 전송 순서바뀔 수 있고 수신여부를 확인하지 않는다, 신뢰성이 낮으며 속도가 빠르다. 주로 스트리밍 서비스에 사용


### TCP(Transmission Control Protocol)

TCP는 연결 지향적 프로토콜이다.

장치들 사이에 논리적인 접속을 성립하기 위해 연결을 설정해 신뢰성을 보장하는 연결형 서비스이다.

### TCP의 특징

1. 연결형 서비스로 가상 회선 방식 제공 
    1. 3way handshaking 과정을 통해 연결을 설정하고 
    2. 4way handshaking 과정을 통해 연결을 해제한다 
    
    `가상 회선 방식` 이란 ? 
    
    : 발신지와 수신지를 연결하여 패킷을 전송하기 위한 논리적 경로를 배정한다는 의미
    
2. 흐름 제어 
    1. 데이터 처리 속도를 조절하여 수신자의 버퍼 오버플로우를 방지
3. 혼잡 제어 
    1. 네트워크 내의 패킷 수가 과도하게 증가하지 않게 방지 
4. 높은 신뢰성보장 
    1. 신뢰성이 높은 전송을 하므로 UDP보다 속도가 느림 
5. 전이중, 점대점 방식
    1. 전이중 : 전송이 양방향으로 동시에 일어날 수 있다.
    2. 점대점 : 각 연결이 정확히 2개의 종단점을 가지고 있다.

### TCP 연결 과정 (3way handshake)

Client → Server

Server → Client

Client → Server

SYN : 연결 확인을 보내는 무작위의 숫자 값

ACK : Client 혹은 Server로부터 받은 SYN에 1을 더해 SYN을 잘 받았다는 ACK

1. 먼저  Open 한 클라이언트가 SYN을 보내고 SYN_SENT 상태로 대기한다
2. 서버는 SYN-RECEIVED 상태로 바꾸고 SYN과 응답 ACK를 보낸다
3. SYN과 응답 ACK를 받은 클라이언트는 ESTABLISHED 상태로 변경하고 서버에게 응답 ACK를 보낸다
4. 응답 ACK를 받은 서버는 ESTABLISHED 상태로 변경한다 

### TCP의 연결 해제 과정 (4way handshake)

Client → Server : 나는 다 보냈어 이제 끊자

Server → Client : 알겠어 잠시만

Server → Client : 나도 끊을게

Client → Server : 알겠어!

1. 먼저 close를 실행한 클라이언트가 FIN(연결 끊자!)를 보내고 FIN-WAIT-1 상태로 대기한다
2. 서버는 CLOSE-WAIT으로 바꾸고 응답 ACK(알겠어! 잠시만~)를 전달한다
    
    동시에 해당 포트에 연결되어 있는 애플리케이션에게 close를 요청한다
    
3. ACK를 받은 클라이언트는 상태를 FIN-WAIT-2로 변경한다
4. close 요청을 받은 서버 애플리케이션은 종료 프로세스를 진행하고 FIN(나도 끊을게!)를 클라이언트로 보내 
    
    LAST_ACK 상태로 바꾼다
    
5. FIN을 받은 클라이언트는 ACK를 서버에 다시 전송하고 TIME-WAIT로 상태를 바꾼다
    
    TIME-WAIT에서 일정 시간이 지나면 CLOSE 된다.
    
    ACK를 받은 서버도 포트를 CLOSED로 닫는다 
    

- TIME-WAIT
    
    : 먼저 연결을 끊는 쪽에서 생성되는 소켓으로 혹시 모를 전송실패에 대비하기 위해 존재하슨 소켓이며 
    
    TIME-WAIT이 없다면 패킷의 손실이 발생하거나 통신자 간 연결 해제가 제대로 되지 않을 수 있다 
    

## UDP(User Datagram Protocol)

UDP는 비연결형 프로토콜이다 

### UDP의 특징

1. 비연결형 서비스로 데이터그램 방식을 제공한다
    1. 데이터의 전송 순서가 바뀔 수 있다 
2. 데이터 수신 여부를 확인하지 않는다
3. 신뢰성이 낮다
    1. 흐름제어가 없어서 제대로 전송되었는지, 오류여부도 확인할 수 없다
4. TCP보다 속도가 빠르다
5. 1:1 & 1:N & N:N 통신이 가능하다 

신뢰성보다는 연속성 있는 전송이 필요할 때 사용. 실시간 스트리밍서비스에 자주사용

<img width="443" alt="스크린샷 2023-06-26 오후 8 40 59" src="https://github.com/seonahHwang/wanted-pre-onboarding-challenge-be-task-July/assets/37287788/d6d4eea9-cde1-4a7a-af3a-32addc68c7c8">

